repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local player = Players.LocalPlayer

local gui = Instance.new("ScreenGui")
gui.IgnoreGuiInset = true
gui.DisplayOrder = 1000
gui.ResetOnSpawn = false
gui.Name = "MkzLoadingScreen"
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = CoreGui

-- Fundo com degradê animado
local gradientBackground = Instance.new("Frame")
gradientBackground.Size = UDim2.new(1, 0, 1, 0)
gradientBackground.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
gradientBackground.BorderSizePixel = 0
gradientBackground.ZIndex = 0
gradientBackground.Parent = gui

local gradient = Instance.new("UIGradient")
gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(20, 20, 20)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(220, 220, 220))
}
gradient.Rotation = 0
gradient.Parent = gradientBackground

task.spawn(function()
    while true do
        TweenService:Create(gradient, TweenInfo.new(5), {Rotation = gradient.Rotation + 180}):Play()
        task.wait(5)
    end
end)

-- Container central posicionado mais para baixo
local container = Instance.new("Frame")
container.AnchorPoint = Vector2.new(0.5, 0)
container.Position = UDim2.new(0.5, 0, 0.6, 0) -- mais para baixo
container.Size = UDim2.new(0.8, 0, 0.4, 0) -- menor altura pra barra caber
container.BackgroundTransparency = 1
container.ZIndex = 10
container.Parent = gui

-- Título
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, 0, 0.25, 0)
title.Position = UDim2.new(0, 0, 0, 0)
title.BackgroundTransparency = 1
title.Text = "Mkz Scripts"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.ZIndex = 11
title.Parent = container

-- Mensagem
local messageLabel = Instance.new("TextLabel")
messageLabel.Size = UDim2.new(1, 0, 0.2, 0)
messageLabel.Position = UDim2.new(0, 0, 0.3, 0)
messageLabel.BackgroundTransparency = 1
messageLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
messageLabel.TextScaled = true
messageLabel.Font = Enum.Font.Gotham
messageLabel.Text = "Please wait, the script is loading..."
messageLabel.ZIndex = 11
messageLabel.Parent = container

-- Barra de progresso (mais grossa e menor largura)
local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0.8, 0, 0.15, 0) -- 80% largura, mais grossa
progressBar.Position = UDim2.new(0.1, 0, 0.55, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
progressBar.BorderSizePixel = 0
progressBar.ZIndex = 11
progressBar.Parent = container
Instance.new("UICorner", progressBar).CornerRadius = UDim.new(1, 0)

local fill = Instance.new("Frame")
fill.Size = UDim2.new(0, 0, 1, 0)
fill.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
fill.BorderSizePixel = 0
fill.ZIndex = 12
fill.Parent = progressBar
Instance.new("UICorner", fill).CornerRadius = UDim.new(1, 0)

-- Texto de porcentagem logo abaixo da barra
local percentText = Instance.new("TextLabel")
percentText.Size = UDim2.new(1, 0, 0.15, 0)
percentText.Position = UDim2.new(0, 0, 0.75, 0)
percentText.BackgroundTransparency = 1
percentText.Text = "0%"
percentText.TextColor3 = Color3.fromRGB(255, 255, 255)
percentText.TextScaled = true
percentText.Font = Enum.Font.GothamBold
percentText.ZIndex = 11
percentText.Parent = container

-- Mensagens rotativas
local messages = {
    "Please wait, the script is loading...",
    "Leaving the game now may delete your pets and get you banned"
}
local msgIndex = 1

local function swapMessage()
    local tweenOut = TweenService:Create(messageLabel, TweenInfo.new(0.4), {
        Position = UDim2.new(1.5, 0, 0.3, 0)
    })
    tweenOut:Play()
    tweenOut.Completed:Wait()

    msgIndex = msgIndex % #messages + 1
    messageLabel.Text = messages[msgIndex]
    messageLabel.Position = UDim2.new(-0.5, 0, 0.3, 0)

    local tweenIn = TweenService:Create(messageLabel, TweenInfo.new(0.4), {
        Position = UDim2.new(0, 0, 0.3, 0)
    })
    tweenIn:Play()
end

-- Progress animation com tween suave
task.spawn(function()
    local duration = 110
    local current = 0
    local target = 100
    local step = 0.01
    local totalSteps = duration / step

    for i = 1, totalSteps do
        current = math.min(target, current + (target / totalSteps))
        local sizeX = current / 100
        TweenService:Create(fill, TweenInfo.new(step), {
            Size = UDim2.new(sizeX, 0, 1, 0)
        }):Play()
        percentText.Text = string.format("%.0f%%", current)
        if math.floor(current) % 10 == 0 then
            swapMessage()
        end
        task.wait(step)
    end

    -- Fade out suave
    local fade = TweenService:Create(container, TweenInfo.new(1), {
        Position = UDim2.new(0.5, 0, 1.5, 0)
    })
    fade:Play()

    TweenService:Create(gradient, TweenInfo.new(1), {
        Transparency = NumberSequence.new(1)
    }):Play()

    task.wait(1.2)
    gui:Destroy()
end)
