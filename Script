-- Garantir que tudo carregou
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local player = Players.LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "MkzLoadingUI"
gui.IgnoreGuiInset = true
gui.DisplayOrder = 1000
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Fundo principal
local frame = Instance.new("Frame")
frame.Size = UDim2.new(1, 0, 1, 0)
frame.Position = UDim2.new(0, 0, 0, 0)
frame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
frame.BorderSizePixel = 0
frame.ZIndex = 10
frame.Parent = gui

-- Título
local title = Instance.new("TextLabel")
title.Size = UDim2.new(0, 800, 0, 100)
title.Position = UDim2.new(0.5, -400, 0.3, 0)
title.BackgroundTransparency = 1
title.Text = "Mkz Scripts"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.ZIndex = 11
title.Parent = frame

-- Mensagem dinâmica
local messageLabel = Instance.new("TextLabel")
messageLabel.Size = UDim2.new(0, 600, 0, 50)
messageLabel.Position = UDim2.new(0.5, -300, 0.42, 0)
messageLabel.BackgroundTransparency = 1
messageLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
messageLabel.TextScaled = true
messageLabel.Font = Enum.Font.Gotham
messageLabel.Text = "Please wait, the script is loading..."
messageLabel.ZIndex = 11
messageLabel.Parent = frame

-- Barra de progresso
local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0, 600, 0, 30)
progressBar.Position = UDim2.new(0.5, -300, 0.52, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
progressBar.BorderSizePixel = 0
progressBar.ZIndex = 11
progressBar.Parent = frame
local corner = Instance.new("UICorner", progressBar)
corner.CornerRadius = UDim.new(0, 15)

local fill = Instance.new("Frame")
fill.Size = UDim2.new(0, 0, 1, 0)
fill.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
fill.BorderSizePixel = 0
fill.ZIndex = 12
fill.Parent = progressBar
local fillCorner = Instance.new("UICorner", fill)
fillCorner.CornerRadius = UDim.new(0, 15)

local percentText = Instance.new("TextLabel")
percentText.Size = UDim2.new(0, 100, 0, 30)
percentText.Position = UDim2.new(0.5, -50, 0.59, 0)
percentText.BackgroundTransparency = 1
percentText.Text = "0%"
percentText.TextColor3 = Color3.fromRGB(255, 255, 255)
percentText.TextScaled = true
percentText.Font = Enum.Font.GothamBold
percentText.ZIndex = 11
percentText.Parent = frame

-- Animações de mensagem
local messages = {
    "Please wait, the script is loading...",
    "Leaving the game now may delete your pets and get you banned"
}
local messageIndex = 1
local function swapMessage()
    local oldPos = messageLabel.Position
    local tweenOut = TweenService:Create(messageLabel, TweenInfo.new(0.4), {
        Position = UDim2.new(0.5, -900, 0.42, 0)
    })
    tweenOut:Play()
    tweenOut.Completed:Wait()

    messageIndex = messageIndex % #messages + 1
    messageLabel.Text = messages[messageIndex]
    messageLabel.Position = UDim2.new(0.5, 900, 0.42, 0)

    local tweenIn = TweenService:Create(messageLabel, TweenInfo.new(0.4), {
        Position = oldPos
    })
    tweenIn:Play()
end

-- Início da animação de carregamento
task.spawn(function()
    local duration = 110
    local steps = 100
    local waitTime = duration / steps

    for i = 1, steps do
        fill.Size = UDim2.new(i / steps, 0, 1, 0)
        percentText.Text = i .. "%"
        if i % 10 == 0 then
            swapMessage()
        end
        task.wait(waitTime)
    end

    -- Fade out ao final
    local fade = TweenService:Create(frame, TweenInfo.new(1), {
        BackgroundTransparency = 1
    })
    fade:Play()

    for _, child in pairs(frame:GetChildren()) do
        if child:IsA("TextLabel") or child:IsA("Frame") then
            TweenService:Create(child, TweenInfo.new(1), {
                TextTransparency = 1,
                BackgroundTransparency = 1
            }):Play()
        end
    end

    task.wait(1.2)
    gui:Destroy()
end)
