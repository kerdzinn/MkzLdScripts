repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local player = Players.LocalPlayer

local gui = Instance.new("ScreenGui")
gui.IgnoreGuiInset = true
gui.DisplayOrder = 1000
gui.ResetOnSpawn = false
gui.Name = "MkzLoadingScreen"
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = CoreGui

-- Fundo com degradê animado
local gradientFrame = Instance.new("Frame")
gradientFrame.Size = UDim2.new(1, 0, 1, 0)
gradientFrame.Position = UDim2.new(0, 0, 0, 0)
gradientFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
gradientFrame.BorderSizePixel = 0
gradientFrame.ZIndex = 0
gradientFrame.Parent = gui

local uiGradient = Instance.new("UIGradient")
uiGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 0, 0)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 255, 255))
}
uiGradient.Rotation = 0
uiGradient.Parent = gradientFrame

task.spawn(function()
	while gui do
		uiGradient.Rotation = (uiGradient.Rotation + 0.1) % 360
		task.wait(0.01)
	end
end)

-- Container central
local frame = Instance.new("Frame")
frame.Size = UDim2.new(1, 0, 1, 0)
frame.BackgroundTransparency = 1
frame.ZIndex = 10
frame.Parent = gui

-- Título (Mkz Scripts)
local title = Instance.new("TextLabel")
title.Size = UDim2.new(0.6, 0, 0, 60)
title.Position = UDim2.new(0.5, 0, 0.5, -130)
title.AnchorPoint = Vector2.new(0.5, 0.5)
title.BackgroundTransparency = 1
title.Text = "Mkz Scripts"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.ZIndex = 11
title.Parent = frame

-- Avisos
local messageLabel = Instance.new("TextLabel")
messageLabel.Size = UDim2.new(0.6, 0, 0, 30)
messageLabel.Position = UDim2.new(0.5, 0, 0.5, -40)
messageLabel.AnchorPoint = Vector2.new(0.5, 0.5)
messageLabel.BackgroundTransparency = 1
messageLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
messageLabel.TextScaled = true
messageLabel.Font = Enum.Font.Gotham
messageLabel.Text = "Please wait, the script is loading..."
messageLabel.ZIndex = 11
messageLabel.Parent = frame

local messages = {
	"Please wait, the script is loading...",
	"Leaving the game now may delete your pets and get you banned",
	"Visit our shop to get exclusive seeds!",
	"Optimize your garden for better harvests!",
	"Don't worry, the game is just preparing things!",
	"Almost there! Just a bit more..."
}
local msgIndex = 1

local function swapMessage()
	local tweenOut = TweenService:Create(messageLabel, TweenInfo.new(0.3), {
		TextTransparency = 1
	})
	tweenOut:Play()
	tweenOut.Completed:Wait()

	msgIndex = msgIndex % #messages + 1
	messageLabel.Text = messages[msgIndex]

	local tweenIn = TweenService:Create(messageLabel, TweenInfo.new(0.3), {
		TextTransparency = 0
	})
	tweenIn:Play()
end

-- Barra de carregamento (menor)
local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0.5, 0, 0, 28)
progressBar.Position = UDim2.new(0.5, 0, 0.5, 10)
progressBar.AnchorPoint = Vector2.new(0.5, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
progressBar.BorderSizePixel = 0
progressBar.ZIndex = 11
progressBar.Parent = frame
Instance.new("UICorner", progressBar).CornerRadius = UDim.new(0, 16)

local fill = Instance.new("Frame")
fill.Size = UDim2.new(0, 0, 1, 0)
fill.BackgroundColor3 = Color3.fromRGB(0, 200, 0)
fill.BorderSizePixel = 0
fill.ZIndex = 12
fill.Parent = progressBar
Instance.new("UICorner", fill).CornerRadius = UDim.new(0, 16)

-- Porcentagem
local percentText = Instance.new("TextLabel")
percentText.Size = UDim2.new(0, 80, 0, 28)
percentText.Position = UDim2.new(0.5, 0, 0.5, 50)
percentText.AnchorPoint = Vector2.new(0.5, 0)
percentText.BackgroundTransparency = 1
percentText.Text = "0%"
percentText.TextColor3 = Color3.fromRGB(255, 255, 255)
percentText.TextScaled = true
percentText.Font = Enum.Font.GothamBold
percentText.ZIndex = 11
percentText.Parent = frame

-- Carregamento suave
task.spawn(function()
	local totalTime = 110
	local steps = 100
	local timePerStep = totalTime / steps

	for i = 1, steps do
		local percent = i
		local goalSize = UDim2.new(i / 100, 0, 1, 0)
		TweenService:Create(fill, TweenInfo.new(timePerStep, Enum.EasingStyle.Linear), {
			Size = goalSize
		}):Play()

		percentText.Text = percent .. "%"

		if i % 10 == 0 then
			swapMessage()
		end

		task.wait(timePerStep)
	end

	-- Remover todos os elementos
	local fadeOut = TweenInfo.new(1)
	for _, v in ipairs(gui:GetDescendants()) do
		if v:IsA("TextLabel") or v:IsA("Frame") then
			TweenService:Create(v, fadeOut, {
				TextTransparency = 1,
				BackgroundTransparency = 1
			}):Play()
		end
	end
	task.wait(1.1)
	gui:Destroy()
end)
