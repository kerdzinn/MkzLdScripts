repeat task.wait() until game:IsLoaded()

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local player = Players.LocalPlayer

local gui = Instance.new("ScreenGui")
gui.IgnoreGuiInset = true
gui.DisplayOrder = 1000
gui.ResetOnSpawn = false
gui.Name = "MkzLoadingScreen"
gui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
gui.Parent = CoreGui

-- Fundo com animação de degradê fluido
local gradientFrame = Instance.new("Frame")
gradientFrame.Size = UDim2.new(1, 0, 1, 0)
gradientFrame.Position = UDim2.new(0, 0, 0, 0)
gradientFrame.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
gradientFrame.BorderSizePixel = 0
gradientFrame.ZIndex = 0
gradientFrame.Parent = gui

local uiGradient = Instance.new("UIGradient")
uiGradient.Color = ColorSequence.new{
	ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 0, 0)),
	ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 255, 255))
}
uiGradient.Rotation = 0
uiGradient.Parent = gradientFrame

-- Rotacionar gradiente suavemente
task.spawn(function()
	while gui do
		uiGradient.Rotation = (uiGradient.Rotation + 0.1) % 360
		task.wait(0.01)
	end
end)

-- Container central
local frame = Instance.new("Frame")
frame.Size = UDim2.new(1, 0, 1, 0)
frame.BackgroundTransparency = 1
frame.ZIndex = 10
frame.Parent = gui

-- Título
local title = Instance.new("TextLabel")
title.Size = UDim2.new(0.8, 0, 0, 80)
title.Position = UDim2.new(0.5, -200, 0.5, -120)
title.AnchorPoint = Vector2.new(0.5, 0.5)
title.BackgroundTransparency = 1
title.Text = "Mkz Scripts"
title.TextColor3 = Color3.fromRGB(255, 255, 255)
title.TextScaled = true
title.Font = Enum.Font.GothamBold
title.ZIndex = 11
title.Parent = frame

-- Mensagem dinâmica
local messageLabel = Instance.new("TextLabel")
messageLabel.Size = UDim2.new(0.8, 0, 0, 40)
messageLabel.Position = UDim2.new(0.5, -200, 0.5, -60)
messageLabel.AnchorPoint = Vector2.new(0.5, 0.5)
messageLabel.BackgroundTransparency = 1
messageLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
messageLabel.TextScaled = true
messageLabel.Font = Enum.Font.Gotham
messageLabel.Text = "Please wait, the script is loading..."
messageLabel.ZIndex = 11
messageLabel.Parent = frame

-- Barra de carregamento (menor, mais grossa)
local progressBar = Instance.new("Frame")
progressBar.Size = UDim2.new(0.6, 0, 0, 40)
progressBar.Position = UDim2.new(0.5, 0, 0.5, 20)
progressBar.AnchorPoint = Vector2.new(0.5, 0)
progressBar.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
progressBar.BorderSizePixel = 0
progressBar.ZIndex = 11
progressBar.Parent = frame
Instance.new("UICorner", progressBar).CornerRadius = UDim.new(0, 20)

local fill = Instance.new("Frame")
fill.Size = UDim2.new(0, 0, 1, 0)
fill.BackgroundColor3 = Color3.fromRGB(0, 255, 0)
fill.BorderSizePixel = 0
fill.ZIndex = 12
fill.Parent = progressBar
Instance.new("UICorner", fill).CornerRadius = UDim.new(0, 20)

-- Porcentagem
local percentText = Instance.new("TextLabel")
percentText.Size = UDim2.new(0, 100, 0, 30)
percentText.Position = UDim2.new(0.5, -50, 0.5, 75)
percentText.BackgroundTransparency = 1
percentText.Text = "0%"
percentText.TextColor3 = Color3.fromRGB(255, 255, 255)
percentText.TextScaled = true
percentText.Font = Enum.Font.GothamBold
percentText.ZIndex = 11
percentText.Parent = frame

-- Lista de mensagens
local messages = {
    "Please wait, the script is loading...",
    "Leaving the game now may delete your pets and get you banned",
    "Thanks for using Mkz Scripts!"
}
local msgIndex = 1

local function swapMessage()
	local tweenOut = TweenService:Create(messageLabel, TweenInfo.new(0.4), {
		Position = UDim2.new(0.5, -1000, 0.5, -60)
	})
	tweenOut:Play()
	tweenOut.Completed:Wait()

	msgIndex = msgIndex % #messages + 1
	messageLabel.Text = messages[msgIndex]
	messageLabel.Position = UDim2.new(0.5, 1000, 0.5, -60)

	local tweenIn = TweenService:Create(messageLabel, TweenInfo.new(0.4), {
		Position = UDim2.new(0.5, -200, 0.5, -60)
	})
	tweenIn:Play()
end

-- Animação contínua e suave da barra
task.spawn(function()
	local duration = 10
	local tween = TweenService:Create(fill, TweenInfo.new(duration, Enum.EasingStyle.Quad, Enum.EasingDirection.Out), {
		Size = UDim2.new(1, 0, 1, 0)
	})
	tween:Play()

	for i = 1, 100 do
		percentText.Text = i .. "%"
		if i % 25 == 0 then
			swapMessage()
		end
		task.wait(duration / 100)
	end

	-- Fade
	local fade = TweenService:Create(frame, TweenInfo.new(1), {
		BackgroundTransparency = 1
	})
	fade:Play()

	for _, child in pairs(frame:GetChildren()) do
		if child:IsA("TextLabel") or child:IsA("Frame") then
			TweenService:Create(child, TweenInfo.new(1), {
				TextTransparency = 1,
				BackgroundTransparency = 1
			}):Play()
		end
	end

	task.wait(1.2)
	gui:Destroy()
end)
